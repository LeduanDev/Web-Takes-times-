{% extends "bases/base.html" %}
{% load static %}
{% block titulo %}{% endblock %}
{% block contenido %}
<link rel="stylesheet" href="{% static 'css/perfil.css' %}?v=1">

<script src="{% static 'js/perfil.js' %}"></script>

<script>
    var actualizarPerfilUrl = "{% url 'actualizar_perfil' %}";
    var cambiarContraseñaUrl = "{% url 'cambiar_contraseña' %}";
</script>


<div class="container rounded bg-white mt-5 mb-5">
    <div class="row">
        <div class="col-md-3 border-right">
            <div class="d-flex flex-column align-items-center text-center p-3 py-5">
                <img class="rounded-circle mt-5" width="150px"
                    src="https://st3.depositphotos.com/15648834/17930/v/600/depositphotos_179308454-stock-illustration-unknown-person-silhouette-glasses-profile.jpg">
                <span class="font-weight-bold">{{ usuario.username }}</span>
                <span class="text-black-50">{{ usuario.email }}</span>
                 Ultimo login:
                <span class="text-black-50"> {{ usuario.last_login }} </span>

            </div>
        </div>

        <div class="col-md-5 border-right">
            <div class="p-3 py-5">
                <form method="post" id="perfil-form">

                    <div class="row mt-2">
                        {% csrf_token %}
                        <label for="{{ perfil_form.username.id_for_label }}" class="label">Nombre de
                            usuario:</label>

                        <input type="text" class="form-control" placeholder="identificador de usuario"
                            value="{{ user.username}}" name="username" required>

                        <label for="{{ perfil_form.email.id_for_label }}" class="label">Correo:</label>

                        <input type="text" class="form-control" placeholder="Correo" value="{{ user.email}}"
                            name="email" required>

                    </div>

                    <div class="row mt-3">
                        <label class="label">Nombre Real:</label>

                        <input type="text" class="form-control" placeholder="Nombre" value="{{ usuario.first_name }}"
                            name="first_name" required>

                        <label class="label">Apellido:</label>

                        <input type="text" class="form-control" placeholder="Apellido" value="{{ usuario.last_name }}"
                            name="last_name" required>
                    </div>


                    <div class="mt-5 text-center">
                        <button class="btn btn-primary profile-button" type="submit">Guardar Perfil</button>
                    </div>
                </form>
            </div>
        </div>
        <div class="col-md-4">
            <div class="p-3 py-5">
                <div class="d-flex justify-content-between align-items-center experience">
                    <span>Cambiar contraseña</span>
                </div><br>
                <div class="messages" style="display: none;">
                    <ul class="messages"></ul>
                </div>

                <form method="post" id="cambiar-contraseña-form">
                    {% csrf_token %}

                    <!-- Contraseña antigua -->
                    <div class="col-md-12">
                        <label class="labels">Contraseña antigua</label>
                        <input type="password" class="form-control" name="old_password" required>

                    </div>

                    <!-- Contraseña nueva -->
                    <div class="col-md-12">
                        <label class="labels">Contraseña nueva</label>
                        <input type="password" class="form-control" name="new_password1" required>

                    </div>

                    <!-- Confirmar contraseña nueva -->
                    <div class="col-md-12">
                        <label class="labels">Confirmar contraseña nueva</label>
                        <input type="password" class="form-control" name="new_password2" required>
                    </div>

                    <div class="mt-5 text-center">
                        <button class="btn btn-primary profile-button" type="submit">Actualizar contraseña</button>
                    </div>

                </form>


            </div>
        </div>

    </div>
  
</div>

{% endblock %}